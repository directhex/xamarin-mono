From c82f072f24b68c25068c2c1ddf76ebb84bb8f5e3 Mon Sep 17 00:00:00 2001
From: Joseph Shields <directhex@apebox.org>
Date: Fri, 26 Jun 2020 16:03:59 -0400
Subject: [PATCH] Revert "[2019-12] Force Python 3.x from env in shebang lines
 (#19423)"

This reverts commit 8199a27e287fce5dea0a8c79570c3e804aee6da0.
---
 configure.ac                                   |  1 -
 mono/mini/Makefile.am.in                       |  2 +-
 mono/mini/genmdesc.py                          |  2 +-
 mono/tests/Makefile.am                         |  2 +-
 .../gc-descriptors/gen-descriptor-tests.py     |  2 +-
 mono/tests/test_lldb.py                        |  2 +-
 netcore/Makefile                               |  4 ++--
 scripts/ci/babysitter                          |  6 +++---
 scripts/mono-heapviz                           |  2 +-
 scripts/submodules/versions.mk                 | 18 +++++++++---------
 scripts/submodules/versions.py                 |  2 +-
 sdks/builds/android.mk                         |  2 +-
 sdks/wasm/Makefile                             |  4 ++--
 sdks/wasm/print-table.py                       |  2 +-
 tools/sgen/gcpausevis.py                       |  2 +-
 15 files changed, 26 insertions(+), 27 deletions(-)

diff --git a/configure.ac b/configure.ac
index 59ba2a083f2..d9d5c55e743 100644
--- a/configure.ac
+++ b/configure.ac
@@ -605,7 +605,6 @@ AC_CHECK_TOOL(CC, gcc, gcc)
 AC_PROG_CC
 AC_CHECK_TOOL(CXX, g++, g++)
 AC_PROG_CXX
-AM_PATH_PYTHON([3.2])
 AM_PROG_AS
 AC_PROG_INSTALL
 AC_PROG_AWK
diff --git a/mono/mini/Makefile.am.in b/mono/mini/Makefile.am.in
index 972a09df21b..e7d5b6daca8 100755
--- a/mono/mini/Makefile.am.in
+++ b/mono/mini/Makefile.am.in
@@ -825,7 +825,7 @@ MemoryIntrinsics.dll: MemoryIntrinsics.il
 
 GENMDESC_OPTS=
 
-GENMDESC_PRG=$(PYTHON) $(srcdir)/genmdesc.py $(target_define) $(srcdir)
+GENMDESC_PRG=python $(srcdir)/genmdesc.py $(target_define) $(srcdir)
 
 cpu-wasm.h: mini-ops.h cpu-wasm.md $(srcdir)/genmdesc.py
 	$(GENMDESC_PRG) cpu-wasm.h wasm_desc $(srcdir)/cpu-wasm.md
diff --git a/mono/mini/genmdesc.py b/mono/mini/genmdesc.py
index 7a20260e81e..79a110bfb6a 100755
--- a/mono/mini/genmdesc.py
+++ b/mono/mini/genmdesc.py
@@ -1,4 +1,4 @@
-#!/usr/bin/env python3
+#!/usr/bin/env python
 
 #
 # This tool is used to generate the cpu-<ARCH>.h files used by the JIT. The input is the
diff --git a/scripts/mono-heapviz b/scripts/mono-heapviz
index c4a4847bbe6..27b6f7f6023 100755
--- a/scripts/mono-heapviz
+++ b/scripts/mono-heapviz
@@ -1,4 +1,4 @@
-#!/usr/bin/env python3
+#!/usr/bin/env python
 
 # Generate a heap visualization for SGen from the heap dump written by
 # mono if the MONO_GC_DEBUG is set to something like
-- 
2.26.2

